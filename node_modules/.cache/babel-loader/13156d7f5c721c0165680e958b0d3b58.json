{"ast":null,"code":"var _excluded = [\"color\", \"direction\", \"invert\", \"max\", \"messages\", \"min\", \"onChange\", \"opacity\", \"round\", \"size\", \"step\", \"values\"];\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { forwardRef, useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport styled, { ThemeContext } from 'styled-components';\nimport { Box } from '../Box';\nimport { EdgeControl } from './EdgeControl';\nimport { parseMetricToNum } from '../../utils';\nimport { MessageContext } from '../../contexts/MessageContext';\nimport { RangeSelectorPropTypes } from './propTypes';\nvar Container = styled(Box).withConfig({\n  displayName: \"RangeSelector__Container\",\n  componentId: \"siof5p-0\"\n})([\"user-select:none;\"]);\nvar RangeSelector = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var color = _ref.color,\n      _ref$direction = _ref.direction,\n      direction = _ref$direction === void 0 ? 'horizontal' : _ref$direction,\n      invert = _ref.invert,\n      _ref$max = _ref.max,\n      max = _ref$max === void 0 ? 100 : _ref$max,\n      messages = _ref.messages,\n      _ref$min = _ref.min,\n      min = _ref$min === void 0 ? 0 : _ref$min,\n      onChange = _ref.onChange,\n      _ref$opacity = _ref.opacity,\n      opacity = _ref$opacity === void 0 ? 'medium' : _ref$opacity,\n      round = _ref.round,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 'medium' : _ref$size,\n      _ref$step = _ref.step,\n      step = _ref$step === void 0 ? 1 : _ref$step,\n      _ref$values = _ref.values,\n      values = _ref$values === void 0 ? [] : _ref$values,\n      rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n\n  var _useContext = useContext(MessageContext),\n      format = _useContext.format;\n\n  var _useState = useState(),\n      changing = _useState[0],\n      setChanging = _useState[1];\n\n  var _useState2 = useState(),\n      lastChange = _useState2[0],\n      setLastChange = _useState2[1];\n\n  var _useState3 = useState(),\n      moveValue = _useState3[0],\n      setMoveValue = _useState3[1];\n\n  var containerRef = useRef();\n  var valueForMouseCoord = useCallback(function (event) {\n    var rect = containerRef.current.getBoundingClientRect();\n    var value;\n\n    if (direction === 'vertical') {\n      // there is no x and y in unit testing\n      var y = event.clientY - (rect.top || 0); // test resilience\n\n      var scaleY = rect.height / (max - min + 1) || 1; // test resilience\n\n      value = Math.floor(y / scaleY) + min;\n    } else {\n      var x = event.clientX - (rect.left || 0); // test resilience\n\n      var scaleX = rect.width / (max - min + 1) || 1; // test resilience\n\n      value = Math.floor(x / scaleX) + min;\n    } // align with closest step within [min, max]\n\n\n    var result = Math.ceil(value / step) * step;\n\n    if (result < min) {\n      return min;\n    }\n\n    if (result > max) {\n      return max;\n    }\n\n    return result;\n  }, [direction, max, min, step]);\n  var onMouseMove = useCallback(function (event) {\n    var value = valueForMouseCoord(event);\n    var nextValues;\n\n    if (changing === 'lower' && value <= values[1] && value !== moveValue) {\n      nextValues = [value, values[1]];\n    } else if (changing === 'upper' && value >= values[0] && value !== moveValue) {\n      nextValues = [values[0], value];\n    } else if (changing === 'selection' && value !== moveValue) {\n      if (value === max) {\n        nextValues = [max - (values[1] - values[0]), max];\n      } else if (value === min) {\n        nextValues = [min, min + (values[1] - values[0])];\n      } else {\n        var delta = value - moveValue;\n\n        if (values[0] + delta >= min && values[1] + delta <= max) {\n          nextValues = [values[0] + delta, values[1] + delta];\n        }\n      }\n    }\n\n    if (nextValues) {\n      setMoveValue(value);\n      onChange(nextValues);\n    }\n  }, [values, changing, moveValue, max, min, setMoveValue, onChange, valueForMouseCoord]);\n  useEffect(function () {\n    var onMouseUp = function onMouseUp() {\n      return setChanging(undefined);\n    };\n\n    if (changing) {\n      window.addEventListener('mousemove', onMouseMove);\n      window.addEventListener('mouseup', onMouseUp);\n      return function () {\n        window.removeEventListener('mousemove', onMouseMove);\n        window.removeEventListener('mouseup', onMouseUp);\n      };\n    }\n\n    return undefined;\n  }, [changing, onMouseMove]);\n  var onClick = useCallback(function (event) {\n    var value = valueForMouseCoord(event);\n\n    if (value <= values[0] || value < values[1] && lastChange === 'lower') {\n      setLastChange('lower');\n      onChange([value, values[1]]);\n    } else if (value >= values[1] || value > values[0] && lastChange === 'upper') {\n      setLastChange('upper');\n      onChange([values[0], value]);\n    }\n  }, [lastChange, onChange, valueForMouseCoord, values]);\n  var onTouchMove = useCallback(function (event) {\n    var touchEvent = event.changedTouches[0];\n    onMouseMove(touchEvent);\n  }, [onMouseMove]);\n  var lower = values[0],\n      upper = values[1]; // It needs to be true when vertical, due to how browsers manage height\n  // const fill = direction === 'vertical' ? true : 'horizontal';\n\n  var thickness = size === 'full' ? undefined : parseMetricToNum(theme.global.edgeSize[size] || size) + \"px\";\n  var layoutProps = {\n    fill: direction,\n    round: round\n  };\n  if (direction === 'vertical') layoutProps.width = thickness;else layoutProps.height = thickness;\n  if (size === 'full') layoutProps.alignSelf = 'stretch';\n  return /*#__PURE__*/React.createElement(Container, _extends({\n    ref: containerRef,\n    direction: direction === 'vertical' ? 'column' : 'row',\n    align: \"center\",\n    fill: true\n  }, rest, {\n    tabIndex: \"-1\",\n    onClick: onChange ? onClick : undefined,\n    onTouchMove: onChange ? onTouchMove : undefined\n  }), /*#__PURE__*/React.createElement(Box, _extends({\n    style: {\n      flex: lower - min + \" 0 0\"\n    },\n    background: invert ? // preserve existing dark, instead of using darknes\n    // of this color\n    {\n      color: color || theme.rangeSelector.background.invert.color,\n      opacity: opacity,\n      dark: theme.dark\n    } : undefined\n  }, layoutProps)), /*#__PURE__*/React.createElement(EdgeControl, {\n    a11yTitle: format({\n      id: 'rangeSelector.lower',\n      messages: messages\n    }),\n    role: \"slider\",\n    \"aria-valuenow\": lower,\n    \"aria-valuemin\": min,\n    \"aria-valuemax\": max,\n    tabIndex: 0,\n    ref: ref,\n    color: color,\n    direction: direction,\n    thickness: thickness,\n    edge: \"lower\",\n    onMouseDown: onChange ? function () {\n      return setChanging('lower');\n    } : undefined,\n    onTouchStart: onChange ? function () {\n      return setChanging('lower');\n    } : undefined,\n    onDecrease: onChange && lower - step >= min ? function () {\n      return onChange([lower - step, upper]);\n    } : undefined,\n    onIncrease: onChange && lower + step <= upper ? function () {\n      return onChange([lower + step, upper]);\n    } : undefined\n  }), /*#__PURE__*/React.createElement(Box, _extends({\n    style: {\n      flex: upper - lower + 1 + \" 0 0\",\n      cursor: direction === 'vertical' ? 'ns-resize' : 'ew-resize'\n    },\n    background: invert ? undefined : // preserve existing dark, instead of using darknes of\n    // this color\n    {\n      color: color || 'control',\n      opacity: opacity,\n      dark: theme.dark\n    }\n  }, layoutProps, {\n    onMouseDown: onChange ? function (event) {\n      var nextMoveValue = valueForMouseCoord(event);\n      setChanging('selection');\n      setMoveValue(nextMoveValue);\n    } : undefined\n  })), /*#__PURE__*/React.createElement(EdgeControl, {\n    a11yTitle: format({\n      id: 'rangeSelector.upper',\n      messages: messages\n    }),\n    role: \"slider\",\n    \"aria-valuenow\": upper,\n    \"aria-valuemin\": min,\n    \"aria-valuemax\": max,\n    tabIndex: 0,\n    color: color,\n    direction: direction,\n    thickness: thickness,\n    edge: \"upper\",\n    onMouseDown: onChange ? function () {\n      return setChanging('upper');\n    } : undefined,\n    onTouchStart: onChange ? function () {\n      return setChanging('upper');\n    } : undefined,\n    onDecrease: onChange && upper - step >= lower ? function () {\n      return onChange([lower, upper - step]);\n    } : undefined,\n    onIncrease: onChange && upper + step <= max ? function () {\n      return onChange([lower, upper + step]);\n    } : undefined\n  }), /*#__PURE__*/React.createElement(Box, _extends({\n    style: {\n      flex: max - upper + \" 0 0\"\n    },\n    background: invert ? // preserve existing dark, instead of using darknes of this\n    // color\n    {\n      color: color || theme.rangeSelector.background.invert.color,\n      opacity: opacity,\n      dark: theme.dark\n    } : undefined\n  }, layoutProps, {\n    round: round\n  })));\n});\nRangeSelector.displayName = 'RangeSelector';\nRangeSelector.propTypes = RangeSelectorPropTypes;\nexport { RangeSelector };","map":{"version":3,"sources":["C:/Users/ë°±ì§ì¤/Desktop/React/mbti/aprime/node_modules/grommet/es6/components/RangeSelector/RangeSelector.js"],"names":["_excluded","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","React","forwardRef","useCallback","useContext","useEffect","useRef","useState","styled","ThemeContext","Box","EdgeControl","parseMetricToNum","MessageContext","RangeSelectorPropTypes","Container","withConfig","displayName","componentId","RangeSelector","_ref","ref","color","_ref$direction","direction","invert","_ref$max","max","messages","_ref$min","min","onChange","_ref$opacity","opacity","round","_ref$size","size","_ref$step","step","_ref$values","values","rest","theme","defaultProps","_useContext","format","_useState","changing","setChanging","_useState2","lastChange","setLastChange","_useState3","moveValue","setMoveValue","containerRef","valueForMouseCoord","event","rect","current","getBoundingClientRect","value","y","clientY","top","scaleY","height","Math","floor","x","clientX","left","scaleX","width","result","ceil","onMouseMove","nextValues","delta","onMouseUp","undefined","window","addEventListener","removeEventListener","onClick","onTouchMove","touchEvent","changedTouches","lower","upper","thickness","global","edgeSize","layoutProps","fill","alignSelf","createElement","align","tabIndex","style","flex","background","rangeSelector","dark","a11yTitle","id","role","edge","onMouseDown","onTouchStart","onDecrease","onIncrease","cursor","nextMoveValue","propTypes"],"mappings":"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","sourcesContent":["var _excluded = [\"color\", \"direction\", \"invert\", \"max\", \"messages\", \"min\", \"onChange\", \"opacity\", \"round\", \"size\", \"step\", \"values\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef, useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport styled, { ThemeContext } from 'styled-components';\nimport { Box } from '../Box';\nimport { EdgeControl } from './EdgeControl';\nimport { parseMetricToNum } from '../../utils';\nimport { MessageContext } from '../../contexts/MessageContext';\nimport { RangeSelectorPropTypes } from './propTypes';\nvar Container = styled(Box).withConfig({\n  displayName: \"RangeSelector__Container\",\n  componentId: \"siof5p-0\"\n})([\"user-select:none;\"]);\nvar RangeSelector = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var color = _ref.color,\n      _ref$direction = _ref.direction,\n      direction = _ref$direction === void 0 ? 'horizontal' : _ref$direction,\n      invert = _ref.invert,\n      _ref$max = _ref.max,\n      max = _ref$max === void 0 ? 100 : _ref$max,\n      messages = _ref.messages,\n      _ref$min = _ref.min,\n      min = _ref$min === void 0 ? 0 : _ref$min,\n      onChange = _ref.onChange,\n      _ref$opacity = _ref.opacity,\n      opacity = _ref$opacity === void 0 ? 'medium' : _ref$opacity,\n      round = _ref.round,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 'medium' : _ref$size,\n      _ref$step = _ref.step,\n      step = _ref$step === void 0 ? 1 : _ref$step,\n      _ref$values = _ref.values,\n      values = _ref$values === void 0 ? [] : _ref$values,\n      rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n\n  var _useContext = useContext(MessageContext),\n      format = _useContext.format;\n\n  var _useState = useState(),\n      changing = _useState[0],\n      setChanging = _useState[1];\n\n  var _useState2 = useState(),\n      lastChange = _useState2[0],\n      setLastChange = _useState2[1];\n\n  var _useState3 = useState(),\n      moveValue = _useState3[0],\n      setMoveValue = _useState3[1];\n\n  var containerRef = useRef();\n  var valueForMouseCoord = useCallback(function (event) {\n    var rect = containerRef.current.getBoundingClientRect();\n    var value;\n\n    if (direction === 'vertical') {\n      // there is no x and y in unit testing\n      var y = event.clientY - (rect.top || 0); // test resilience\n\n      var scaleY = rect.height / (max - min + 1) || 1; // test resilience\n\n      value = Math.floor(y / scaleY) + min;\n    } else {\n      var x = event.clientX - (rect.left || 0); // test resilience\n\n      var scaleX = rect.width / (max - min + 1) || 1; // test resilience\n\n      value = Math.floor(x / scaleX) + min;\n    } // align with closest step within [min, max]\n\n\n    var result = Math.ceil(value / step) * step;\n\n    if (result < min) {\n      return min;\n    }\n\n    if (result > max) {\n      return max;\n    }\n\n    return result;\n  }, [direction, max, min, step]);\n  var onMouseMove = useCallback(function (event) {\n    var value = valueForMouseCoord(event);\n    var nextValues;\n\n    if (changing === 'lower' && value <= values[1] && value !== moveValue) {\n      nextValues = [value, values[1]];\n    } else if (changing === 'upper' && value >= values[0] && value !== moveValue) {\n      nextValues = [values[0], value];\n    } else if (changing === 'selection' && value !== moveValue) {\n      if (value === max) {\n        nextValues = [max - (values[1] - values[0]), max];\n      } else if (value === min) {\n        nextValues = [min, min + (values[1] - values[0])];\n      } else {\n        var delta = value - moveValue;\n\n        if (values[0] + delta >= min && values[1] + delta <= max) {\n          nextValues = [values[0] + delta, values[1] + delta];\n        }\n      }\n    }\n\n    if (nextValues) {\n      setMoveValue(value);\n      onChange(nextValues);\n    }\n  }, [values, changing, moveValue, max, min, setMoveValue, onChange, valueForMouseCoord]);\n  useEffect(function () {\n    var onMouseUp = function onMouseUp() {\n      return setChanging(undefined);\n    };\n\n    if (changing) {\n      window.addEventListener('mousemove', onMouseMove);\n      window.addEventListener('mouseup', onMouseUp);\n      return function () {\n        window.removeEventListener('mousemove', onMouseMove);\n        window.removeEventListener('mouseup', onMouseUp);\n      };\n    }\n\n    return undefined;\n  }, [changing, onMouseMove]);\n  var onClick = useCallback(function (event) {\n    var value = valueForMouseCoord(event);\n\n    if (value <= values[0] || value < values[1] && lastChange === 'lower') {\n      setLastChange('lower');\n      onChange([value, values[1]]);\n    } else if (value >= values[1] || value > values[0] && lastChange === 'upper') {\n      setLastChange('upper');\n      onChange([values[0], value]);\n    }\n  }, [lastChange, onChange, valueForMouseCoord, values]);\n  var onTouchMove = useCallback(function (event) {\n    var touchEvent = event.changedTouches[0];\n    onMouseMove(touchEvent);\n  }, [onMouseMove]);\n  var lower = values[0],\n      upper = values[1]; // It needs to be true when vertical, due to how browsers manage height\n  // const fill = direction === 'vertical' ? true : 'horizontal';\n\n  var thickness = size === 'full' ? undefined : parseMetricToNum(theme.global.edgeSize[size] || size) + \"px\";\n  var layoutProps = {\n    fill: direction,\n    round: round\n  };\n  if (direction === 'vertical') layoutProps.width = thickness;else layoutProps.height = thickness;\n  if (size === 'full') layoutProps.alignSelf = 'stretch';\n  return /*#__PURE__*/React.createElement(Container, _extends({\n    ref: containerRef,\n    direction: direction === 'vertical' ? 'column' : 'row',\n    align: \"center\",\n    fill: true\n  }, rest, {\n    tabIndex: \"-1\",\n    onClick: onChange ? onClick : undefined,\n    onTouchMove: onChange ? onTouchMove : undefined\n  }), /*#__PURE__*/React.createElement(Box, _extends({\n    style: {\n      flex: lower - min + \" 0 0\"\n    },\n    background: invert ? // preserve existing dark, instead of using darknes\n    // of this color\n    {\n      color: color || theme.rangeSelector.background.invert.color,\n      opacity: opacity,\n      dark: theme.dark\n    } : undefined\n  }, layoutProps)), /*#__PURE__*/React.createElement(EdgeControl, {\n    a11yTitle: format({\n      id: 'rangeSelector.lower',\n      messages: messages\n    }),\n    role: \"slider\",\n    \"aria-valuenow\": lower,\n    \"aria-valuemin\": min,\n    \"aria-valuemax\": max,\n    tabIndex: 0,\n    ref: ref,\n    color: color,\n    direction: direction,\n    thickness: thickness,\n    edge: \"lower\",\n    onMouseDown: onChange ? function () {\n      return setChanging('lower');\n    } : undefined,\n    onTouchStart: onChange ? function () {\n      return setChanging('lower');\n    } : undefined,\n    onDecrease: onChange && lower - step >= min ? function () {\n      return onChange([lower - step, upper]);\n    } : undefined,\n    onIncrease: onChange && lower + step <= upper ? function () {\n      return onChange([lower + step, upper]);\n    } : undefined\n  }), /*#__PURE__*/React.createElement(Box, _extends({\n    style: {\n      flex: upper - lower + 1 + \" 0 0\",\n      cursor: direction === 'vertical' ? 'ns-resize' : 'ew-resize'\n    },\n    background: invert ? undefined : // preserve existing dark, instead of using darknes of\n    // this color\n    {\n      color: color || 'control',\n      opacity: opacity,\n      dark: theme.dark\n    }\n  }, layoutProps, {\n    onMouseDown: onChange ? function (event) {\n      var nextMoveValue = valueForMouseCoord(event);\n      setChanging('selection');\n      setMoveValue(nextMoveValue);\n    } : undefined\n  })), /*#__PURE__*/React.createElement(EdgeControl, {\n    a11yTitle: format({\n      id: 'rangeSelector.upper',\n      messages: messages\n    }),\n    role: \"slider\",\n    \"aria-valuenow\": upper,\n    \"aria-valuemin\": min,\n    \"aria-valuemax\": max,\n    tabIndex: 0,\n    color: color,\n    direction: direction,\n    thickness: thickness,\n    edge: \"upper\",\n    onMouseDown: onChange ? function () {\n      return setChanging('upper');\n    } : undefined,\n    onTouchStart: onChange ? function () {\n      return setChanging('upper');\n    } : undefined,\n    onDecrease: onChange && upper - step >= lower ? function () {\n      return onChange([lower, upper - step]);\n    } : undefined,\n    onIncrease: onChange && upper + step <= max ? function () {\n      return onChange([lower, upper + step]);\n    } : undefined\n  }), /*#__PURE__*/React.createElement(Box, _extends({\n    style: {\n      flex: max - upper + \" 0 0\"\n    },\n    background: invert ? // preserve existing dark, instead of using darknes of this\n    // color\n    {\n      color: color || theme.rangeSelector.background.invert.color,\n      opacity: opacity,\n      dark: theme.dark\n    } : undefined\n  }, layoutProps, {\n    round: round\n  })));\n});\nRangeSelector.displayName = 'RangeSelector';\nRangeSelector.propTypes = RangeSelectorPropTypes;\nexport { RangeSelector };"]},"metadata":{},"sourceType":"module"}