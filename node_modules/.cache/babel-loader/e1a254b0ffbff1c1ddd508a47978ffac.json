{"ast":null,"code":"var _excluded = [\"active\", \"align\", \"aria-label\", \"badge\", \"color\", \"children\", \"disabled\", \"icon\", \"focusIndicator\", \"gap\", \"fill\", \"href\", \"kind\", \"label\", \"onBlur\", \"onClick\", \"onFocus\", \"onMouseOut\", \"onMouseOver\", \"plain\", \"primary\", \"reverse\", \"secondary\", \"selected\", \"size\", \"tip\", \"type\", \"a11yTitle\", \"as\"];\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { cloneElement, Children, forwardRef, useContext, useMemo, useState } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { backgroundAndTextColors, colorIsDark, normalizeBackground, normalizeColor } from '../../utils';\nimport { defaultProps } from '../../default-props';\nimport { ButtonPropTypes } from './propTypes';\nimport { Box } from '../Box';\nimport { Tip } from '../Tip';\nimport { Badge } from './Badge';\nimport { StyledButton } from './StyledButton';\nimport { StyledButtonKind } from './StyledButtonKind'; // We have two Styled* components to separate\n// the newer default|primary|secondary approach,\n// which we use the term \"kind\" to refer to,\n// from the previous approach. Hopefully, when we get to grommet v3,\n// we can drop the old way and just use kind.\n//\n// In the kind approach, we rely on the basic structure of the theme\n// being repeated. For example: button.default, button.active,\n// button.active.default all refer to a similar object containing\n// { background, border, color, padding }.\n// This allows us to use the same code to evaluate color and generate CSS.\n// We just need to build up CSS, since selectors override previous ones.\n// See StyledButtonKind.kindStyles() for this.\n// And we build down to determine icon color, once we have a color from\n// the latest applicable state, we can stop. See Button.getIconColor() for this.\n// backgroundAndTextColor() is used in both cases to ensure we are determining\n// color in the same way, so the icon and label align.\n// only when default is in the theme\n// Used to get the color for the icon to match what StyledButtonKind\n// and backgroundStyle() will do for the label.\n// The paths are ordered from basic to specific. Go through them\n// specific to base until we find one that has a color and use that.\n\nvar getIconColor = function getIconColor(paths, theme, colorProp, kind) {\n  if (paths === void 0) {\n    paths = [];\n  }\n\n  var result = [];\n  var index = paths.length - 1; // caller has specified a themeObj to use for styling\n  // relevant for cases like pagination which looks to theme.pagination.button\n\n  if (typeof kind === 'object') index = 0; // stop when we have a color or no more paths\n\n  while (index >= 0 && !result[1]) {\n    var obj = typeof kind === 'object' && kind || theme.button; // find the sub-object under the button them that corresponds with this path\n    // for example: 'active.primary'\n\n    if (paths[index]) {\n      var parts = paths[index].split('.');\n\n      while (obj && parts.length) {\n        obj = obj[parts.shift()];\n      }\n    }\n\n    if (obj) {\n      // use passed in color for background if the theme has a background color\n      var background = colorProp && obj.background && obj.background.color ? colorProp : obj.background; // if theme object explicitly sets the color to undefined, pass false\n      // to indicate that the theme doesn't want any text color\n\n      var objColor = obj.color || (Object.prototype.hasOwnProperty.call(obj, 'color') && obj.color === undefined ? false : undefined); // use passed in color for text if the theme doesn't have\n      // background or border color\n\n      var color = colorProp && (!obj.background || !obj.background.color) && (!obj.border || !obj.border.color) ? colorProp : objColor;\n      result = backgroundAndTextColors(background, color, theme);\n    }\n\n    index -= 1;\n  }\n\n  return result[1] || undefined;\n};\n\nvar getPropertyColor = function getPropertyColor(property, paths, theme, kind, primary) {\n  if (paths === void 0) {\n    paths = [];\n  }\n\n  var result;\n\n  if (kind) {\n    var obj = typeof kind === 'object' && kind || theme.button; // index 0 is default state\n\n    if (paths[0]) {\n      var parts = paths[0].split('.');\n\n      while (obj && parts.length) {\n        obj = obj[parts.shift()];\n      }\n    }\n\n    if (obj) {\n      result = obj[property] || obj[property] && obj[property].color;\n    }\n  } else if (primary && theme && theme.button && theme.button.primary) {\n    result = theme.button.primary[property] || theme.button.primary[property] && theme.button.primary[property].color;\n  } else {\n    result = theme && theme.button && theme.button[property] || theme && theme.button && theme.button[property] && theme.button[property].color;\n  }\n\n  return result;\n};\n\nvar Button = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var active = _ref.active,\n      _ref$align = _ref.align,\n      align = _ref$align === void 0 ? 'center' : _ref$align,\n      ariaLabel = _ref['aria-label'],\n      badgeProp = _ref.badge,\n      color = _ref.color,\n      children = _ref.children,\n      disabled = _ref.disabled,\n      icon = _ref.icon,\n      _ref$focusIndicator = _ref.focusIndicator,\n      focusIndicator = _ref$focusIndicator === void 0 ? true : _ref$focusIndicator,\n      _ref$gap = _ref.gap,\n      gap = _ref$gap === void 0 ? 'small' : _ref$gap,\n      fill = _ref.fill,\n      href = _ref.href,\n      kindArg = _ref.kind,\n      label = _ref.label,\n      _onBlur = _ref.onBlur,\n      onClick = _ref.onClick,\n      _onFocus = _ref.onFocus,\n      onMouseOut = _ref.onMouseOut,\n      onMouseOver = _ref.onMouseOver,\n      plain = _ref.plain,\n      primary = _ref.primary,\n      reverse = _ref.reverse,\n      secondary = _ref.secondary,\n      selected = _ref.selected,\n      size = _ref.size,\n      tip = _ref.tip,\n      _ref$type = _ref.type,\n      type = _ref$type === void 0 ? 'button' : _ref$type,\n      _ref$a11yTitle = _ref.a11yTitle,\n      a11yTitle = _ref$a11yTitle === void 0 ? typeof tip === 'string' ? tip : undefined : _ref$a11yTitle,\n      as = _ref.as,\n      rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n\n  var _useState = useState(),\n      focus = _useState[0],\n      setFocus = _useState[1];\n\n  var _useState2 = useState(false),\n      hover = _useState2[0],\n      setHover = _useState2[1];\n\n  if ((icon || label) && children) {\n    console.warn('Button should not have children if icon or label is provided');\n  } // kindArg is object if we are referencing a theme object\n  // outside of theme.button\n\n\n  var kindObj = useMemo(function () {\n    return typeof kindArg === 'object';\n  }, [kindArg]); // if the theme has button.default, what kind of Button is this\n\n  var kind = useMemo(function () {\n    if (theme.button[\"default\"] || kindObj) {\n      if (kindArg) return kindArg;\n      if (primary) return 'primary';\n      if (secondary) return 'secondary';\n      return 'default';\n    }\n\n    return undefined; // pre-default, no kind\n  }, [kindArg, kindObj, primary, secondary, theme]); // When we have a kind and are not plain, themePaths stores the relative\n  // paths within the theme for the current kind and state of the button.\n  // These paths are used with getIconColor() above and kindStyle() within\n  // StyledButtonKind.\n\n  var themePaths = useMemo(function () {\n    if (!kind || plain) return undefined;\n    var result = {\n      base: [],\n      hover: []\n    };\n    if (!kindObj) result.base.push(kind);\n\n    if (selected) {\n      result.base.push('selected');\n      if (!kindObj) result.base.push(\"selected.\" + kind);\n    }\n\n    if (disabled) {\n      result.base.push('disabled');\n      if (!kindObj) result.base.push(\"disabled.\" + kind);\n    } else {\n      if (active) {\n        result.base.push('active');\n        if (!kindObj) result.base.push(\"active.\" + kind);\n      }\n\n      result.hover.push('hover');\n      if (!kindObj) result.hover.push(\"hover.\" + kind);\n\n      if (active) {\n        result.hover.push(\"hover.active\");\n\n        if (!kindObj) {\n          result.hover.push(\"hover.active.\" + kind);\n        }\n      }\n    }\n\n    return result;\n  }, [active, disabled, kind, kindObj, plain, selected]); // only used when theme does not have button.default\n\n  var isDarkBackground = function isDarkBackground() {\n    var backgroundColor = normalizeBackground(normalizeColor(color || theme.button.primary && theme.button.primary.color || theme.global.colors.control || 'brand', theme), theme);\n    return colorIsDark(backgroundColor, theme);\n  };\n\n  var onMouseOverButton = function onMouseOverButton(event) {\n    setHover(true);\n\n    if (onMouseOver) {\n      onMouseOver(event);\n    }\n  };\n\n  var onMouseOutButton = function onMouseOutButton(event) {\n    setHover(false);\n\n    if (onMouseOut) {\n      onMouseOut(event);\n    }\n  };\n\n  var buttonIcon = icon; // only change color if user did not specify the color themselves...\n\n  if (icon && !icon.props.color) {\n    if (kind) {\n      if (!plain) {\n        // match what the label will use\n        var iconColor = hover && getIconColor(themePaths.hover, theme) || getIconColor(themePaths.base, theme, color, kind);\n        if (iconColor) buttonIcon = /*#__PURE__*/cloneElement(icon, {\n          color: iconColor\n        });\n      }\n    } else if (primary) {\n      buttonIcon = /*#__PURE__*/cloneElement(icon, {\n        color: theme.global.colors.text[isDarkBackground() ? 'dark' : 'light']\n      });\n    }\n  }\n\n  var domTag = !as && href ? 'a' : as;\n  var first = reverse ? label : buttonIcon;\n  var second = reverse ? buttonIcon : label;\n  var contents;\n\n  if (first && second) {\n    contents = /*#__PURE__*/React.createElement(Box, {\n      direction: \"row\",\n      align: \"center\",\n      justify: align === 'center' ? 'center' : 'between',\n      gap: gap,\n      responsive: false\n    }, first, second);\n  } else if (typeof children === 'function') {\n    contents = children({\n      disabled: disabled,\n      hover: hover,\n      focus: focus\n    });\n  } else {\n    contents = first || second || children;\n  }\n\n  var background = getPropertyColor('background', themePaths && themePaths.base, theme, kind, primary);\n  var border = getPropertyColor('border', themePaths && themePaths.base, theme, kind, primary); // set the badge relative to the button content\n  // when the button doesn't have background or border\n  // (!kind && icon && !label) is necessary because for old button logic,\n  // if button has icon but not label, it will be considered \"plain\",\n  // so no border or background will be applied\n\n  var innerBadge = !background && !border || !kind && icon && !label;\n\n  if (badgeProp && innerBadge) {\n    contents = /*#__PURE__*/React.createElement(Badge, {\n      content: badgeProp\n    }, contents);\n  }\n\n  var styledButtonResult;\n\n  if (kind) {\n    styledButtonResult = /*#__PURE__*/React.createElement(StyledButtonKind, _extends({}, rest, {\n      as: domTag,\n      ref: ref,\n      active: active,\n      align: align,\n      \"aria-label\": ariaLabel || a11yTitle,\n      badge: badgeProp,\n      colorValue: color,\n      disabled: disabled,\n      gap: gap,\n      fillContainer: fill,\n      focus: focus,\n      focusIndicator: focusIndicator,\n      href: href,\n      kind: kind,\n      themePaths: themePaths,\n      onClick: onClick,\n      onFocus: function onFocus(event) {\n        setFocus(true);\n        if (_onFocus) _onFocus(event);\n      },\n      onBlur: function onBlur(event) {\n        setFocus(false);\n        if (_onBlur) _onBlur(event);\n      },\n      onMouseOver: onMouseOverButton,\n      onMouseOut: onMouseOutButton,\n      plain: plain || Children.count(children) > 0,\n      primary: primary,\n      sizeProp: size,\n      type: !href ? type : undefined\n    }), contents);\n  } else {\n    styledButtonResult = /*#__PURE__*/React.createElement(StyledButton, _extends({}, rest, {\n      as: domTag,\n      ref: ref,\n      \"aria-label\": ariaLabel || a11yTitle,\n      colorValue: color,\n      active: active,\n      selected: selected,\n      disabled: disabled,\n      hasIcon: !!icon,\n      gap: gap,\n      hasLabel: !!label,\n      fillContainer: fill,\n      focus: focus,\n      focusIndicator: focusIndicator,\n      href: href,\n      kind: kind,\n      themePaths: themePaths,\n      onClick: onClick,\n      onFocus: function onFocus(event) {\n        setFocus(true);\n        if (_onFocus) _onFocus(event);\n      },\n      onBlur: function onBlur(event) {\n        setFocus(false);\n        if (_onBlur) _onBlur(event);\n      },\n      onMouseOver: onMouseOverButton,\n      onMouseOut: onMouseOutButton,\n      pad: !plain,\n      plain: typeof plain !== 'undefined' ? plain : Children.count(children) > 0 || icon && !label,\n      primary: primary,\n      sizeProp: size,\n      type: !href ? type : undefined\n    }), contents);\n  }\n\n  if (tip) {\n    if (typeof tip === 'string') {\n      styledButtonResult = /*#__PURE__*/React.createElement(Tip, {\n        content: tip\n      }, styledButtonResult);\n    } else {\n      styledButtonResult = /*#__PURE__*/React.createElement(Tip, tip, styledButtonResult);\n    }\n  } // if button has background or border, place badge relative\n  // to outer edge of button\n\n\n  if (badgeProp && !innerBadge) {\n    styledButtonResult = /*#__PURE__*/React.createElement(Badge, {\n      content: badgeProp\n    }, styledButtonResult);\n  }\n\n  return styledButtonResult;\n});\nButton.displayName = 'Button';\nButton.propTypes = ButtonPropTypes;\nexport { Button };","map":{"version":3,"sources":["C:/Users/백지윤/Desktop/React/mbti/aprime/node_modules/grommet/es6/components/Button/Button.js"],"names":["_excluded","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","React","cloneElement","Children","forwardRef","useContext","useMemo","useState","ThemeContext","backgroundAndTextColors","colorIsDark","normalizeBackground","normalizeColor","defaultProps","ButtonPropTypes","Box","Tip","Badge","StyledButton","StyledButtonKind","getIconColor","paths","theme","colorProp","kind","result","index","obj","button","parts","split","shift","background","color","objColor","undefined","border","getPropertyColor","property","primary","Button","_ref","ref","active","_ref$align","align","ariaLabel","badgeProp","badge","children","disabled","icon","_ref$focusIndicator","focusIndicator","_ref$gap","gap","fill","href","kindArg","label","_onBlur","onBlur","onClick","_onFocus","onFocus","onMouseOut","onMouseOver","plain","reverse","secondary","selected","size","tip","_ref$type","type","_ref$a11yTitle","a11yTitle","as","rest","_useState","focus","setFocus","_useState2","hover","setHover","console","warn","kindObj","themePaths","base","push","isDarkBackground","backgroundColor","global","colors","control","onMouseOverButton","event","onMouseOutButton","buttonIcon","props","iconColor","text","domTag","first","second","contents","createElement","direction","justify","responsive","innerBadge","content","styledButtonResult","colorValue","fillContainer","count","sizeProp","hasIcon","hasLabel","pad","displayName","propTypes"],"mappings":"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","sourcesContent":["var _excluded = [\"active\", \"align\", \"aria-label\", \"badge\", \"color\", \"children\", \"disabled\", \"icon\", \"focusIndicator\", \"gap\", \"fill\", \"href\", \"kind\", \"label\", \"onBlur\", \"onClick\", \"onFocus\", \"onMouseOut\", \"onMouseOver\", \"plain\", \"primary\", \"reverse\", \"secondary\", \"selected\", \"size\", \"tip\", \"type\", \"a11yTitle\", \"as\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { cloneElement, Children, forwardRef, useContext, useMemo, useState } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { backgroundAndTextColors, colorIsDark, normalizeBackground, normalizeColor } from '../../utils';\nimport { defaultProps } from '../../default-props';\nimport { ButtonPropTypes } from './propTypes';\nimport { Box } from '../Box';\nimport { Tip } from '../Tip';\nimport { Badge } from './Badge';\nimport { StyledButton } from './StyledButton';\nimport { StyledButtonKind } from './StyledButtonKind'; // We have two Styled* components to separate\n// the newer default|primary|secondary approach,\n// which we use the term \"kind\" to refer to,\n// from the previous approach. Hopefully, when we get to grommet v3,\n// we can drop the old way and just use kind.\n//\n// In the kind approach, we rely on the basic structure of the theme\n// being repeated. For example: button.default, button.active,\n// button.active.default all refer to a similar object containing\n// { background, border, color, padding }.\n// This allows us to use the same code to evaluate color and generate CSS.\n// We just need to build up CSS, since selectors override previous ones.\n// See StyledButtonKind.kindStyles() for this.\n// And we build down to determine icon color, once we have a color from\n// the latest applicable state, we can stop. See Button.getIconColor() for this.\n// backgroundAndTextColor() is used in both cases to ensure we are determining\n// color in the same way, so the icon and label align.\n// only when default is in the theme\n// Used to get the color for the icon to match what StyledButtonKind\n// and backgroundStyle() will do for the label.\n// The paths are ordered from basic to specific. Go through them\n// specific to base until we find one that has a color and use that.\n\nvar getIconColor = function getIconColor(paths, theme, colorProp, kind) {\n  if (paths === void 0) {\n    paths = [];\n  }\n\n  var result = [];\n  var index = paths.length - 1; // caller has specified a themeObj to use for styling\n  // relevant for cases like pagination which looks to theme.pagination.button\n\n  if (typeof kind === 'object') index = 0; // stop when we have a color or no more paths\n\n  while (index >= 0 && !result[1]) {\n    var obj = typeof kind === 'object' && kind || theme.button; // find the sub-object under the button them that corresponds with this path\n    // for example: 'active.primary'\n\n    if (paths[index]) {\n      var parts = paths[index].split('.');\n\n      while (obj && parts.length) {\n        obj = obj[parts.shift()];\n      }\n    }\n\n    if (obj) {\n      // use passed in color for background if the theme has a background color\n      var background = colorProp && obj.background && obj.background.color ? colorProp : obj.background; // if theme object explicitly sets the color to undefined, pass false\n      // to indicate that the theme doesn't want any text color\n\n      var objColor = obj.color || (Object.prototype.hasOwnProperty.call(obj, 'color') && obj.color === undefined ? false : undefined); // use passed in color for text if the theme doesn't have\n      // background or border color\n\n      var color = colorProp && (!obj.background || !obj.background.color) && (!obj.border || !obj.border.color) ? colorProp : objColor;\n      result = backgroundAndTextColors(background, color, theme);\n    }\n\n    index -= 1;\n  }\n\n  return result[1] || undefined;\n};\n\nvar getPropertyColor = function getPropertyColor(property, paths, theme, kind, primary) {\n  if (paths === void 0) {\n    paths = [];\n  }\n\n  var result;\n\n  if (kind) {\n    var obj = typeof kind === 'object' && kind || theme.button; // index 0 is default state\n\n    if (paths[0]) {\n      var parts = paths[0].split('.');\n\n      while (obj && parts.length) {\n        obj = obj[parts.shift()];\n      }\n    }\n\n    if (obj) {\n      result = obj[property] || obj[property] && obj[property].color;\n    }\n  } else if (primary && theme && theme.button && theme.button.primary) {\n    result = theme.button.primary[property] || theme.button.primary[property] && theme.button.primary[property].color;\n  } else {\n    result = theme && theme.button && theme.button[property] || theme && theme.button && theme.button[property] && theme.button[property].color;\n  }\n\n  return result;\n};\n\nvar Button = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var active = _ref.active,\n      _ref$align = _ref.align,\n      align = _ref$align === void 0 ? 'center' : _ref$align,\n      ariaLabel = _ref['aria-label'],\n      badgeProp = _ref.badge,\n      color = _ref.color,\n      children = _ref.children,\n      disabled = _ref.disabled,\n      icon = _ref.icon,\n      _ref$focusIndicator = _ref.focusIndicator,\n      focusIndicator = _ref$focusIndicator === void 0 ? true : _ref$focusIndicator,\n      _ref$gap = _ref.gap,\n      gap = _ref$gap === void 0 ? 'small' : _ref$gap,\n      fill = _ref.fill,\n      href = _ref.href,\n      kindArg = _ref.kind,\n      label = _ref.label,\n      _onBlur = _ref.onBlur,\n      onClick = _ref.onClick,\n      _onFocus = _ref.onFocus,\n      onMouseOut = _ref.onMouseOut,\n      onMouseOver = _ref.onMouseOver,\n      plain = _ref.plain,\n      primary = _ref.primary,\n      reverse = _ref.reverse,\n      secondary = _ref.secondary,\n      selected = _ref.selected,\n      size = _ref.size,\n      tip = _ref.tip,\n      _ref$type = _ref.type,\n      type = _ref$type === void 0 ? 'button' : _ref$type,\n      _ref$a11yTitle = _ref.a11yTitle,\n      a11yTitle = _ref$a11yTitle === void 0 ? typeof tip === 'string' ? tip : undefined : _ref$a11yTitle,\n      as = _ref.as,\n      rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n\n  var _useState = useState(),\n      focus = _useState[0],\n      setFocus = _useState[1];\n\n  var _useState2 = useState(false),\n      hover = _useState2[0],\n      setHover = _useState2[1];\n\n  if ((icon || label) && children) {\n    console.warn('Button should not have children if icon or label is provided');\n  } // kindArg is object if we are referencing a theme object\n  // outside of theme.button\n\n\n  var kindObj = useMemo(function () {\n    return typeof kindArg === 'object';\n  }, [kindArg]); // if the theme has button.default, what kind of Button is this\n\n  var kind = useMemo(function () {\n    if (theme.button[\"default\"] || kindObj) {\n      if (kindArg) return kindArg;\n      if (primary) return 'primary';\n      if (secondary) return 'secondary';\n      return 'default';\n    }\n\n    return undefined; // pre-default, no kind\n  }, [kindArg, kindObj, primary, secondary, theme]); // When we have a kind and are not plain, themePaths stores the relative\n  // paths within the theme for the current kind and state of the button.\n  // These paths are used with getIconColor() above and kindStyle() within\n  // StyledButtonKind.\n\n  var themePaths = useMemo(function () {\n    if (!kind || plain) return undefined;\n    var result = {\n      base: [],\n      hover: []\n    };\n    if (!kindObj) result.base.push(kind);\n\n    if (selected) {\n      result.base.push('selected');\n      if (!kindObj) result.base.push(\"selected.\" + kind);\n    }\n\n    if (disabled) {\n      result.base.push('disabled');\n      if (!kindObj) result.base.push(\"disabled.\" + kind);\n    } else {\n      if (active) {\n        result.base.push('active');\n        if (!kindObj) result.base.push(\"active.\" + kind);\n      }\n\n      result.hover.push('hover');\n      if (!kindObj) result.hover.push(\"hover.\" + kind);\n\n      if (active) {\n        result.hover.push(\"hover.active\");\n\n        if (!kindObj) {\n          result.hover.push(\"hover.active.\" + kind);\n        }\n      }\n    }\n\n    return result;\n  }, [active, disabled, kind, kindObj, plain, selected]); // only used when theme does not have button.default\n\n  var isDarkBackground = function isDarkBackground() {\n    var backgroundColor = normalizeBackground(normalizeColor(color || theme.button.primary && theme.button.primary.color || theme.global.colors.control || 'brand', theme), theme);\n    return colorIsDark(backgroundColor, theme);\n  };\n\n  var onMouseOverButton = function onMouseOverButton(event) {\n    setHover(true);\n\n    if (onMouseOver) {\n      onMouseOver(event);\n    }\n  };\n\n  var onMouseOutButton = function onMouseOutButton(event) {\n    setHover(false);\n\n    if (onMouseOut) {\n      onMouseOut(event);\n    }\n  };\n\n  var buttonIcon = icon; // only change color if user did not specify the color themselves...\n\n  if (icon && !icon.props.color) {\n    if (kind) {\n      if (!plain) {\n        // match what the label will use\n        var iconColor = hover && getIconColor(themePaths.hover, theme) || getIconColor(themePaths.base, theme, color, kind);\n        if (iconColor) buttonIcon = /*#__PURE__*/cloneElement(icon, {\n          color: iconColor\n        });\n      }\n    } else if (primary) {\n      buttonIcon = /*#__PURE__*/cloneElement(icon, {\n        color: theme.global.colors.text[isDarkBackground() ? 'dark' : 'light']\n      });\n    }\n  }\n\n  var domTag = !as && href ? 'a' : as;\n  var first = reverse ? label : buttonIcon;\n  var second = reverse ? buttonIcon : label;\n  var contents;\n\n  if (first && second) {\n    contents = /*#__PURE__*/React.createElement(Box, {\n      direction: \"row\",\n      align: \"center\",\n      justify: align === 'center' ? 'center' : 'between',\n      gap: gap,\n      responsive: false\n    }, first, second);\n  } else if (typeof children === 'function') {\n    contents = children({\n      disabled: disabled,\n      hover: hover,\n      focus: focus\n    });\n  } else {\n    contents = first || second || children;\n  }\n\n  var background = getPropertyColor('background', themePaths && themePaths.base, theme, kind, primary);\n  var border = getPropertyColor('border', themePaths && themePaths.base, theme, kind, primary); // set the badge relative to the button content\n  // when the button doesn't have background or border\n  // (!kind && icon && !label) is necessary because for old button logic,\n  // if button has icon but not label, it will be considered \"plain\",\n  // so no border or background will be applied\n\n  var innerBadge = !background && !border || !kind && icon && !label;\n\n  if (badgeProp && innerBadge) {\n    contents = /*#__PURE__*/React.createElement(Badge, {\n      content: badgeProp\n    }, contents);\n  }\n\n  var styledButtonResult;\n\n  if (kind) {\n    styledButtonResult = /*#__PURE__*/React.createElement(StyledButtonKind, _extends({}, rest, {\n      as: domTag,\n      ref: ref,\n      active: active,\n      align: align,\n      \"aria-label\": ariaLabel || a11yTitle,\n      badge: badgeProp,\n      colorValue: color,\n      disabled: disabled,\n      gap: gap,\n      fillContainer: fill,\n      focus: focus,\n      focusIndicator: focusIndicator,\n      href: href,\n      kind: kind,\n      themePaths: themePaths,\n      onClick: onClick,\n      onFocus: function onFocus(event) {\n        setFocus(true);\n        if (_onFocus) _onFocus(event);\n      },\n      onBlur: function onBlur(event) {\n        setFocus(false);\n        if (_onBlur) _onBlur(event);\n      },\n      onMouseOver: onMouseOverButton,\n      onMouseOut: onMouseOutButton,\n      plain: plain || Children.count(children) > 0,\n      primary: primary,\n      sizeProp: size,\n      type: !href ? type : undefined\n    }), contents);\n  } else {\n    styledButtonResult = /*#__PURE__*/React.createElement(StyledButton, _extends({}, rest, {\n      as: domTag,\n      ref: ref,\n      \"aria-label\": ariaLabel || a11yTitle,\n      colorValue: color,\n      active: active,\n      selected: selected,\n      disabled: disabled,\n      hasIcon: !!icon,\n      gap: gap,\n      hasLabel: !!label,\n      fillContainer: fill,\n      focus: focus,\n      focusIndicator: focusIndicator,\n      href: href,\n      kind: kind,\n      themePaths: themePaths,\n      onClick: onClick,\n      onFocus: function onFocus(event) {\n        setFocus(true);\n        if (_onFocus) _onFocus(event);\n      },\n      onBlur: function onBlur(event) {\n        setFocus(false);\n        if (_onBlur) _onBlur(event);\n      },\n      onMouseOver: onMouseOverButton,\n      onMouseOut: onMouseOutButton,\n      pad: !plain,\n      plain: typeof plain !== 'undefined' ? plain : Children.count(children) > 0 || icon && !label,\n      primary: primary,\n      sizeProp: size,\n      type: !href ? type : undefined\n    }), contents);\n  }\n\n  if (tip) {\n    if (typeof tip === 'string') {\n      styledButtonResult = /*#__PURE__*/React.createElement(Tip, {\n        content: tip\n      }, styledButtonResult);\n    } else {\n      styledButtonResult = /*#__PURE__*/React.createElement(Tip, tip, styledButtonResult);\n    }\n  } // if button has background or border, place badge relative\n  // to outer edge of button\n\n\n  if (badgeProp && !innerBadge) {\n    styledButtonResult = /*#__PURE__*/React.createElement(Badge, {\n      content: badgeProp\n    }, styledButtonResult);\n  }\n\n  return styledButtonResult;\n});\nButton.displayName = 'Button';\nButton.propTypes = ButtonPropTypes;\nexport { Button };"]},"metadata":{},"sourceType":"module"}